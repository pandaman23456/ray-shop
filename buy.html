<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>구매하기</title>

<style>
body {
    font-family: Arial;
    text-align: center;
}

.account-box {
    background: #f2f2f2;
    padding: 15px;
    margin: 20px auto;
    width: 300px;
    border-radius: 8px;
}

.warning {
    color: red;
    font-size: 14px;
}

form {
    margin-top: 20px;
}
</style>
</head>

<body>

<h2>🛒 상품 구매</h2>

<div class="account-box">
    <h3>💳 송금 계좌</h3>
    <p><strong>은행:</strong> 국민은행</p>
    <p><strong>계좌번호:</strong> 123-456-789012</p>
    <p><strong>예금주:</strong> 홍길동</p>
    <p class="warning">※ 송금자명은 이름 + 전화번호뒤4자리 로 입력해주세요.</p>
</div>

<form id="orderForm">

<input type="text" name="name" placeholder="이름" required><br><br>

<input type="text" name="phone4" placeholder="전화번호 뒤 4자리"
pattern="[0-9]{4}" maxlength="4" required><br><br>

<input type="text" name="discord" placeholder="디스코드 아이디 (예: user#1234)" required><br><br>

<select name="product" required>
    <option value="">제품 선택</option>
    <option value="1000robux">1000 Robux</option>
    <option value="2000robux">2000 Robux</option>
    <option value="3000robux">3000 Robux</option>
    <option value="5000robux">5000 Robux</option>
    <option value="8000robux">8000 Robux</option>
    <option value="10000robux">10000 Robux</option>
</select>
<br><br>

<label>
    <input type="checkbox" id="agreeCheck">
    다시 한번 확인 해주세요. 주문 실수는 책임지지 않습니다.
</label>
<br><br>

<button type="submit">결제하기</button>

</form>

<script>
const scriptURL = "https://script.google.com/macros/s/AKfycbw3nO7QNklkRFIrGIm85QIUwwi3IM38go9G90ZvBbDm5J2x_GEvJZofwUaox-S6FHGTnQ/exec";

/* 🔥 자동 상품 선택 */
window.onload = function() {
    const params = new URLSearchParams(window.location.search);
    const product = params.get("product");

    if (product) {
        document.querySelector("select[name='product']").value = product;
    }
};

/* 🔥 주문 제출 */
document.getElementById("orderForm").addEventListener("submit", function(e) {
    e.preventDefault();

    if (!document.getElementById("agreeCheck").checked) {
        alert("주문 동의 체크를 해주세요.");
        return;
    }

    const formData = new FormData(this);

    fetch(scriptURL, {
        method: "POST",
        body: formData
    })
    .then(response => response.text())
    .then(data => {
        window.location.href = "complete.html";
    })
    .catch(error => {
        alert("에러 발생");
        console.error(error);
    });
});
</script>

</body>
</html>
